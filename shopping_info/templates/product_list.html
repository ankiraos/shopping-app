{% extends 'base.html' %}

{% block title %}Product List{% endblock %}

{% block content %}
<div class="container my-5">
    {% if products %}
    <h2 class="text-center mb-4">Product List</h2>
    <table class="table table-hover table-bordered">
        <thead class="thead-dark">
            <tr>
                <th scope="col">Product Name</th>
                <th scope="col">Brand</th>
                <th scope="col">Price</th>
                <th scope="col">Description</th>
                <th scope="col">Stock</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.product_name }}</td>
                <td>{{ product.brand }}</td>
                <td>â‚¹ {{ product.price }}</td>
                <td>{{ product.description }}</td>
                <td>
                    {% if product.stock > 0 %}
                        <span class="badge badge-success">{{ product.stock }} in stock</span>
                    {% else %}
                        <span class="badge badge-danger">Out of stock</span>
                    {% endif %}
                </td>
                <td>
                    {% if request.user.is_staff %}
                        <a href="/delproduct/{{product.id}}" class="btn btn-danger btn-sm">Delete</a>
                    {% else %}
                        <a href="/add_order/{{product.id}}" class="btn btn-primary btn-sm mb-1">Buy Now</a>
                        <a href="/addcart_plist/{{product.id}}" class="btn btn-warning btn-sm">Add to Cart</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="text-center">
        <h3 class="mb-4">Sorry, no products found!</h3>
        <img src="https://cdni.iconscout.com/illustration/premium/thumb/sorry-item-not-found-illustration-download-in-svg-png-gif-file-formats--available-product-tokostore-pack-e-commerce-shopping-illustrations-2809510.png?f=webp" alt="No products found" class="img-fluid" style="max-width: 400px;">
        <p class="mt-3">Please check back later.</p>
    </div>
    {% endif %}
</div>
{% endblock %}

